(function(){var activitiesAdminCtrl=function($scope,$rootScope,$cookieStore,$http){$scope.view={};$scope.data={};$scope.currentPage=1;$scope.pagination=5;$scope.size=0;$scope.orderBy="event";$scope.desc=1;$scope.changeFilter=function(filter){if($scope.orderBy==filter){if($scope.desc==1){$scope.desc=0}else{$scope.desc=1}}else{$scope.desc=1;$scope.orderBy=filter}$scope.getActivities()};$scope.isNext=function(){return $scope.currentPage*$scope.pagination<$scope.size&&$scope.pagination>0};$scope.getPrev=function(){$scope.currentPage=$scope.currentPage-1;$scope.getActivities()};$scope.getNext=function(){$scope.currentPage=$scope.currentPage+1;$scope.getActivities()};$scope.getPages=function(pages){$scope.pagination=pages;$scope.currentPage=1;$scope.getActivities()};$scope.getSize=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/event/"+$rootScope.config.eventId+"/activityTAM/all",method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.size=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.deleteActivity=function(activityId){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/activity/"+activityId,method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.getActivities()}).error(function(data,status,headers,config){console.log("error delete")})}else{console.log("error")}};$scope.getActivities=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/event/"+$rootScope.config.eventId+"/activityHeaders/query?page="+$scope.currentPage+"&pageTam="+$scope.pagination+"&orderBy="+$scope.orderBy+"&desc="+$scope.desc,method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.data=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.ctr=function(){$scope.getSize();$scope.getActivities()};$scope.ctr()};activitiesAdminCtrl.$inject=["$scope","$rootScope","$cookieStore","$http"];angular.module("FICOnWeb").controller("activitiesAdminCtrl",activitiesAdminCtrl)})();(function(){var activityaddCtrl=function($scope,$rootScope,$http,$cookieStore,$log,$location,$routeParams){$scope.view={};$scope.view.activity={};$scope.view.activity.image="";$scope.view.activity.name="";$scope.view.activity.description="";$scope.view.activity.type="production";$scope.view.activity.oficial=false;$scope.publish=function(activity){if($routeParams.id){$rootScope.postUri("/api/activity/"+$routeParams.id,{name:activity.name,imageurl:activity.image,description:activity.description,numParticipants:500,oficial:activity.oficial,type:activity.type},function(){$location.path("/home")},function(data,status,headers,config){console.log("Actividad  no creada")},"PUT")}else{$rootScope.postUri("/api/event/{eventId}/activity/",{name:activity.name,imageurl:activity.image,description:activity.description,numParticipants:500,oficial:activity.oficial,type:activity.type},function(){$location.path("/home")},function(data,status,headers,config){console.log("Actividad  no creada")})}};$scope.ctr=function(){if($routeParams.id){$rootScope.getUri("/api/activity/"+$routeParams.id,function(data){$scope.view={};$scope.view.activity={};$scope.view.activity.image=data.imageurl;$scope.view.activity.name=data.name;$scope.view.activity.description=data.description;$scope.view.activity.type=data.type;$scope.view.activity.oficial=data.oficial})}};$scope.ctr()};activityaddCtrl.$inject=["$scope","$rootScope","$http","$cookieStore","$log","$location","$routeParams"];angular.module("FICOnWeb").controller("activityaddCtrl",activityaddCtrl)})();(function(){var adminNewsCtrl=function($scope,$cookieStore,$http,$rootScope){$scope.view={};$scope.data={};$scope.currentPage=1;$scope.pagination=5;$scope.size=0;$scope.orderBy="publishDate";$scope.desc=1;$scope.changeDate=function(date){return moment(date,"DD-MM-YYYY/HH:mm:ss").format("DD-MM-YYYY HH:mm:ss")};$scope.changeFilter=function(filter){if($scope.orderBy==filter){if($scope.desc==1){$scope.desc=0}else{$scope.desc=1}}else{$scope.desc=1;$scope.orderBy=filter}$scope.getNews()};$scope.isNext=function(){return $scope.currentPage*$scope.pagination<$scope.size&&$scope.pagination>0};$scope.getPrev=function(){$scope.currentPage=$scope.currentPage-1;$scope.getNews()};$scope.getNext=function(){$scope.currentPage=$scope.currentPage+1;$scope.getNews()};$scope.getPages=function(pages){$scope.pagination=pages;$scope.currentPage=1;$scope.getNews()};$scope.getSize=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/event/news/all/size/"+$rootScope.config.eventId,method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.size=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.deleteNews=function(newsId){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/news/"+newsId,method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.getNews()}).error(function(data,status,headers,config){console.log("error delete")})}else{console.log("error")}};$scope.getNews=function(){$http({url:$rootScope.config.apiUrl+"/api/event/"+$rootScope.config.eventId+"/news/query?page="+$scope.currentPage+"&pageTam="+$scope.pagination+"&orderBy="+$scope.orderBy+"&desc="+$scope.desc,method:"GET",headers:{sessionId:$rootScope.getSessionId()}}).success(function(data,status,headers,config){$scope.data=data}).error(function(data,status,headers,config){console.log("Error getNews() "+status+": "+data)})};$scope.ctr=function(){$scope.getSize();$scope.getNews()};$scope.ctr()};adminNewsCtrl.$inject=["$scope","$cookieStore","$http","$rootScope"];angular.module("FICOnWeb").controller("adminNewsCtrl",adminNewsCtrl)})();(function(){var editorEmailTemplatesCtrl=function($scope,$rootScope,$log){$scope.view={};$scope.view.templates={};$scope.send=function(template){var object={};var idTemplate;switch(template){case"confirmed":object.asunto=$scope.view.templates.subjectSpotConfirmed;object.contenido=$scope.view.templates.contentSpotConfirmed;idTemplate=$scope.view.templates.idSpotConfirmed;break;case"pendingDirect":object.asunto=$scope.view.templates.subjectPendingConfirmationDirect;object.contenido=$scope.view.templates.contentPendingConfirmationDirect;idTemplate=$scope.view.templates.idPendingConfirmationDirect;break;case"queue":object.asunto=$scope.view.templates.subjectOnQueue;object.contenido=$scope.view.templates.contentOnQueue;idTemplate=$scope.view.templates.idOnQueue;break;case"pendingFromQueue":object.asunto=$scope.view.templates.subjectPendingConfirmationFromQueue;object.contenido=$scope.view.templates.contentPendingConfirmationFromQueue;idTemplate=$scope.view.templates.idPendingConfirmationFromQueue;break;case"expired":object.asunto=$scope.view.templates.subjectConfirmationPeriodExpired;object.contenido=$scope.view.templates.contentConfirmationPeriodExpired;idTemplate=$scope.view.templates.idConfirmationPeriodExpired;break}$rootScope.postUri("/api/emailTemplate/"+idTemplate,object,function(data){},undefined,"PUT")};$scope.ctr=function(){$rootScope.getUri("/api/event/{eventId}/getEmailTemplates",function(data){$scope.view.templates=data})};$scope.ctr()};editorEmailTemplatesCtrl.$inject=["$scope","$rootScope","$log"];angular.module("FICOnWeb").controller("editorEmailTemplatesCtrl",editorEmailTemplatesCtrl)})();(function(){var editeventCtrl=function($scope,$rootScope,$routeParams,$http,$cookieStore,$log,$location){$scope.view={};$scope.view.event={};$scope.view.event.name="";$scope.view.event.price="0";$scope.view.event.description="";$scope.view.event.normas="";$scope.view.event.registrationOpenDate;$scope.view.event.registrationCloseDate;$scope.view.registrationOpenDate;$scope.view.registrationCloseDate;$scope.changeDate=function(date){return moment(date).format("DD-MM-YYYY/HH:mm:ss")};$scope.update=function(){if(!$scope.view.registrationOpenDate){$scope.view.registrationOpenDate=new Date}if(!$scope.view.registrationCloseDate){$scope.view.registrationCloseDate=new Date}};$scope.openInscriptionStart=function($ev){$ev.preventDefault();$ev.stopPropagation();$scope.openedInscriptionStart=true};$scope.openInscriptionEnd=function($ev){$ev.preventDefault();$ev.stopPropagation();$scope.openedInscriptionClose=true};$scope.open=function($event){$event.preventDefault();$event.stopPropagation();$scope.opened=true};$scope.dateOptions={formatYear:"yyyy","show-weeks":"false",startingDay:1};$scope.format="dd-MM-yyyy";$scope.send=function(event){$scope.view.event.registrationOpenDate=$scope.changeDate($scope.view.registrationOpenDate);$scope.view.event.registrationCloseDate=$scope.changeDate($scope.view.registrationCloseDate);if($routeParams.id){$rootScope.postUri("/api/event/"+$routeParams.id,$scope.view.event,function(){$location.path("/home")},undefined,"PUT")}else{$rootScope.postUri("/api/event",$scope.view.event,function(){$location.path("/home")})}};$scope.ctr=function(){if($routeParams.id){$rootScope.getUri("/api/event/{eventId}",function(data){$scope.view.event.name=data.name;$scope.view.event.normas=data.rules;$scope.view.event.price=data.price;$scope.view.event.description=data.description;$scope.view.event.registrationOpenDate=data.openInscriptionDate;$scope.view.registrationOpenDate=moment(data.openInscriptionDate,"DD-MM-YYYY/HH:mm:ss").toDate();$scope.view.registrationCloseDate=moment(data.closeInscriptionDate,"DD-MM-YYYY/HH:mm:ss").toDate();$scope.update()})}else{$scope.update()}};$scope.ctr()};editeventCtrl.$inject=["$scope","$rootScope","$routeParams","$http","$cookieStore","$log","$location"];angular.module("FICOnWeb").controller("editeventCtrl",editeventCtrl)})();(function(){var editorNewsCtrl=function($scope,$rootScope,$http,$cookieStore,$log,$location,$routeParams){$scope.view={};$scope.view.news={};$scope.view.news.image="";$scope.view.news.title="";$scope.view.news.date="";$scope.view.news.content="";$scope.view.date=new Date;$scope.view.publishNow=true;$scope.changeDate=function(date){return moment(date).format("DD-MM-YYYY/HH:mm:ss")};$scope.update=function(){if(!$scope.view.date){var d=new Date;$scope.view.date=d}};$scope.open=function($event){$event.preventDefault();$event.stopPropagation();$scope.opened=true};$scope.dateOptions={formatYear:"yyyy","show-weeks":"false",startingDay:1};$scope.format="dd-MM-yyyy";$scope.publish=function(news){if(!$scope.view.publishNow){news.date=$scope.changeDate($scope.view.date)}else{news.date=null}$rootScope.postUri($routeParams.id?"/api/news/"+$routeParams.id:"/api/event/news/{eventId}/",{title:news.title,imageurl:news.image,content:news.content,priorityHours:0,publishDate:news.date},function(){$location.path("/home")},function(data,status,headers,config){console.log("Noticia  no guardada")},$routeParams.id?"PUT":"POST")};$scope.ctr=function(){if($routeParams.id){$rootScope.getUri("/api/news/"+$routeParams.id,function(data){$scope.view.news=data;$scope.view.image=data.imageurl;$scope.view.date=moment(data.publishDate,"DD-MM-YYYY/HH:mm:ss").toDate()});$scope.view.publishNow=false}$scope.update()};$scope.ctr()};editorNewsCtrl.$inject=["$scope","$rootScope","$http","$cookieStore","$log","$location","$routeParams"];angular.module("FICOnWeb").controller("editorNewsCtrl",editorNewsCtrl)})();(function(){var homeCtrl=function($scope,$rootScope,$http,$cookieStore,$routeParams,$location){$scope.view={};$scope.currentPage=1;$scope.pagination=10;$scope.news={};$scope.isNext=function(){return $scope.currentPage*$scope.pagination<$scope.size};$scope.getPrev=function(){$scope.currentPage=parseInt($scope.currentPage)-1;$location.url("home?page="+$scope.currentPage)};$scope.getNext=function(){$scope.currentPage=parseInt($scope.currentPage)+1;$location.url("home?page="+$scope.currentPage)};$scope.getNews=function(){$rootScope.getUri("/api/event/{eventId}/news/published/"+$scope.currentPage+"/"+$scope.pagination,function(data){$scope.news=data})};$scope.getSponsors=function(){if($rootScope.event&&$rootScope.event.sponsors){$scope.sponsors=$rootScope.event.sponsors}else{$rootScope.getUri("/api/event/{eventId}/sponsors",function(data,status,headers,config){$scope.sponsors=data})}};$scope.ctr=function(){if($routeParams.page)$scope.currentPage=$routeParams.page;$scope.getNews();$rootScope.getEventData($scope)};$scope.ctr()};homeCtrl.$inject=["$scope","$rootScope","$http","$cookieStore","$routeParams","$location"];angular.module("FICOnWeb").controller("homeCtrl",homeCtrl)})();(function(){var loginCtrl=function($scope,$rootScope,$http,$cookieStore,$location){$scope.view={};$scope.view.user="";$scope.view.password="";$scope.view.email="";$scope.view.sendRecover=false;$scope.errors={};$scope.errors.login=false;$scope.errors.loginCode="";$scope.errors.forgot=false;$scope.errors.forgotCode="";$scope.loading={};$scope.loading.forgotten=false;$scope.sendForgotten=function(email){$scope.view.sendRecover=false;$scope.errors.forgot=false;$scope.errors.forgotCode="";$scope.loading.forgotten=true;$rootScope.postUri("/api/user/passwordrecover",{contenido:email},function(data,status,headers,config){$scope.loading.forgotten=false;if(data=="true"){$scope.view.sendRecover=true}else{if(data=="false"){$scope.errors.forgot=true;$scope.errors.forgotCode="98"}else{}}},function(data,status){$scope.loading.forgotten=false;$scope.errors.forgot=true;$scope.errors.forgotCode=data.exceptionCode})};$scope.login=function(user,password){$scope.errors.login=false;$scope.errors.loginCode="";$rootScope.postUri("/api/login",{login:user,password:password},function(data,status,headers,config){$cookieStore.put("FICOnCookie",data);if(data.secondpass){$location.path("/profile")}else{$location.path("/home")}},function(data,status,headers,config){$scope.errors.login=true;$scope.errors.loginCode=data.exceptionCode})};$scope.ctr=function(){};$scope.ctr()};loginCtrl.$inject=["$scope","$rootScope","$http","$cookieStore","$location"];angular.module("FICOnWeb").controller("loginCtrl",loginCtrl)})();(function(){var menuCtrl=function($scope,$http,$cookieStore,$rootScope,$window,$location){$scope.data={};$scope.data.tournaments=[];$scope.data.productions=[];$scope.data.conferences=[];$scope.logout=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/session",method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$cookieStore.remove("FICOnCookie");$location.path("/");$window.location.reload()}).error(function(data,status,headers,config){$cookieStore.remove("FICOnCookie");$location.path("/");$window.location.reload()})}else{$rootScope.createSession()}};$scope.ctr=function(){$rootScope.getEventData($scope)};$scope.checkRole=function(role){return $scope.vars.roles.indexOf(role)!=-1};$scope.showAdmin=function(){return $scope.checkRole("Admin")||$scope.checkRole("ActivityController")||$scope.checkRole("EventController")||$scope.checkRole("NewsController")||$scope.checkRole("SponsorController")||$scope.checkRole("RegistrationController")};$scope.ctr()};menuCtrl.$inject=["$scope","$http","$cookieStore","$rootScope","$window","$location"];angular.module("FICOnWeb").controller("menuCtrl",menuCtrl)})();(function(){var profileCtrl=function($scope,$rootScope,$cookieStore,$http,$location){$scope.view={};$scope.view.passChanged=false;$scope.view.dataChanged=false;$scope.view.oldPass="";$scope.view.newPass="";$scope.view.newPass2="";$scope.view.dob="";$scope.data={};$scope.data.user={};$scope.errors={};$scope.errors.recoverPass=false;$scope.errors.recoverPassCode="";$scope.errors.changeData=false;$scope.errors.changeDataCode="";$scope.changeDate=function(date){return moment(date,"DD-MM-YYYY/HH:mm:ss").format("DD-MM-YYYY")};$scope.deleteUser=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/user/"+$cookieStore.get("FICOnCookie").userId,method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$("#modalDelete").modal("toggle");$location.path("home")}).error(function(data,status,headers,config){console.log("error delete")})}else{console.log("error")}};$scope.getCurrentUser=function(){if($rootScope.getIsLogged()){$rootScope.getUri("/api/session/currentUser",function(data,status){$scope.data.user=data;$scope.view.dob=$scope.changeDate($scope.data.user.dob)},function(data,status){$location.path("home")})}else{$location.path("home")}};$scope.changeData=function(){$scope.errors.changeData=false;$scope.view.dataChanged=false;$scope.errors.changeDataCode="";if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/user/"+$cookieStore.get("FICOnCookie").userId,method:"PUT",data:$scope.data.user,headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.view.dataChanged=true}).error(function(data,status,headers,config){$scope.errors.changeData=true;$scope.errors.changeDataCode=data.exceptionCode})}else{$rootScope.createSession()}};$scope.changePassword=function(oldPassword,newPassword){$scope.errors.recoverPass=false;$scope.view.passChanged=false;$scope.errors.recoverPassCode="";if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/user/changePassword/"+$cookieStore.get("FICOnCookie").userId,method:"POST",data:{oldPassword:oldPassword,newPassword:newPassword},headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.view.passChanged=true;$scope.view.oldPass="";$scope.view.newPass="";$scope.view.newPass2=""}).error(function(data,status,headers,config){$scope.errors.recoverPass=true;$scope.errors.recoverPassCode=data.exceptionCode})}else{$rootScope.createSession()}};$(function(){$('[data-toggle="tooltip"]').tooltip()});$scope.ctr=function(){$rootScope.pageRequiresLogin();$scope.getCurrentUser()};$scope.ctr()};profileCtrl.$inject=["$scope","$rootScope","$cookieStore","$http","$location"];angular.module("FICOnWeb").controller("profileCtrl",profileCtrl)})();(function(){var registerCtrl=function($scope,$cookieStore,$http,$rootScope,$filter){$scope.view={};$scope.view.selectDNI="1";$scope.view.login="";$scope.view.pass="";$scope.view.pass2="";$scope.view.email="";$scope.view.name="";$scope.view.dni="";$scope.view.phone="";$scope.view.shirtSize="";$scope.view.dob="";$scope.view.registerSend=false;$scope.errors={};$scope.errors.register=false;$scope.errors.registerCode="";$scope.open=function($event){$event.preventDefault();$event.stopPropagation();$scope.opened=true};$scope.dateOptions={formatYear:"yyyy","show-weeks":"false",startingDay:1};$scope.format="dd-MM-yyyy";$scope.validateDni=function(dni){if(dni!==undefined){var numero,letr,letra;var expresion_regular_dni=/^[XYZ]?\d{5,8}[A-Z]$/;dni=dni.toUpperCase();if(expresion_regular_dni.test(dni)===true){numero=dni.substr(0,dni.length-1);numero=numero.replace("X",0);numero=numero.replace("Y",1);numero=numero.replace("Z",2);letr=dni.substr(dni.length-1,1);numero=numero%23;letra="TRWAGMYFPDXBNJZSQVHLCKET";letra=letra.substring(numero,numero+1);if(letra!=letr){return false}else{return true}}else{return false}}};$scope.register=function(login,pass,pass2,email,name,dni,phone,shirtSize,dob){$scope.view.registerSend=false;$scope.errors.register=false;$scope.errors.registerCode="";$rootScope.postUri("/api/user",{name:name,login:login,password:pass,dni:dni,email:email,phoneNumber:phone,shirtSize:shirtSize,dob:$filter("date")($scope.view.dob,"dd-MM-yyyy/12:00:00")},function(data,status,headers,config){$scope.view.registerSend=true},function(data,status,headers,config){$scope.errors.register=true;$scope.errors.registerCode=data.exceptionCode;$scope.view.duplicateField=data.field;$rootScope.createSession()})};$scope.ctr=function(){};$scope.ctr()};registerCtrl.$inject=["$scope","$cookieStore","$http","$rootScope","$filter"];angular.module("FICOnWeb").controller("registerCtrl",registerCtrl)})();(function(){var registerEventCtrl=function($scope,$rootScope,$cookieStore,$http){$scope.view={};$scope.data={};$scope.evento=$rootScope.config.eventId;$scope.currentPage=1;$scope.pagination=5;$scope.size=0;$scope.orderBy="login";$scope.desc=0;$scope.changeFilter=function(filter){if($scope.orderBy==filter){if($scope.desc==1){$scope.desc=0}else{$scope.desc=1}}else{$scope.desc=1;$scope.orderBy=filter}$scope.getUsers()};$scope.changeDate=function(date){return moment(date,"DD-MM-YYYY/HH:mm:ss").format("DD-MM-YYYY - HH:mm:ss")};$scope.isNext=function(){return $scope.currentPage*$scope.pagination<$scope.size&&$scope.pagination>0};$scope.getPrev=function(){$scope.currentPage=$scope.currentPage-1;$scope.getUsers()};$scope.getNext=function(){$scope.currentPage=$scope.currentPage+1;$scope.getUsers()};$scope.getPages=function(pages){$scope.pagination=pages;$scope.currentPage=1;$scope.getUsers()};$scope.getSize=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/event/registrations/size/"+$rootScope.config.eventId+"/all",method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.data=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.setPaid=function(userId){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/registration/setPaid/"+$rootScope.config.eventId+"/"+userId,method:"PUT",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.ctr()}).error(function(data,status,headers,config){console.log("Error setPaid() "+status+": "+data)})}else{console.log("error")}};$scope.classLabel=function(state){if(state=="paid")return"label-success";if(state=="registered")return"label-warning";if(state=="inQueue")return"label-danger"};$scope.removeRegister=function(userId){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/registration/"+$rootScope.config.eventId+"/"+userId,method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.ctr();$("#modalDelete").modal("toggle")}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.getUsers=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/event/registrations/"+$rootScope.config.eventId+"/query?page="+$scope.currentPage+"&pageTam="+$scope.pagination+"&orderBy="+$scope.orderBy+"&desc="+$scope.desc+"&state=all",method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.data=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.ctr=function(){$scope.getSize();$scope.getUsers()};$scope.ctr()};registerEventCtrl.$inject=["$scope","$rootScope","$cookieStore","$http"];angular.module("FICOnWeb").controller("registerEventCtrl",registerEventCtrl)})();(function(){var rulesCtrl=function($scope,$rootScope,$http,$cookieStore){$scope.data={};$scope.ctr=function(){$rootScope.getEventData($scope)};$scope.ctr()};rulesCtrl.$inject=["$scope","$rootScope","$http","$cookieStore"];angular.module("FICOnWeb").controller("rulesCtrl",rulesCtrl)})();(function(){var showActivityCtrl=function($scope,$rootScope,$cookieStore,$http,$routeParams){$scope.data={};$scope.type="";$scope.getActivity=function(){$rootScope.getUri("/api/activity/"+$routeParams.id,function(data,status,headers,config){$scope.data=data})};$scope.ctr=function(){if($routeParams.type=="tournament")$scope.type="Torneo";if($routeParams.type=="production")$scope.type="Producción";if($routeParams.type=="conference")$scope.type="Conferencia";$scope.getActivity()};$scope.ctr()};showActivityCtrl.$inject=["$scope","$rootScope","$cookieStore","$http","$routeParams"];angular.module("FICOnWeb").controller("showActivityCtrl",showActivityCtrl)})();(function(){var sponsoraddCtrl=function($scope,$rootScope,$http,$cookieStore,$log,$location){$scope.view={};$scope.view.sponsor={};$scope.view.sponsor.imageurl="";$scope.view.sponsor.name="";$scope.view.sponsor.url="";$scope.publish=function(sponsor){$rootScope.postUri("/api/event/sponsor/{eventId}",{name:sponsor.name,imageurl:sponsor.imageurl,url:sponsor.url},function(){$location.path("/home")})};$scope.ctr=function(){};$scope.ctr()};sponsoraddCtrl.$inject=["$scope","$rootScope","$http","$cookieStore","$log","$location"];angular.module("FICOnWeb").controller("sponsoraddCtrl",sponsoraddCtrl)})();(function(){var sponsorCtrl=function($scope,$cookieStore,$http,$rootScope){$scope.view={};$scope.data={};$scope.view.name="";$scope.view.id="";$scope.currentPage=1;$scope.pagination=5;$scope.size=0;$scope.orderBy="sponsorId";$scope.desc=0;$scope.changeFilter=function(filter){if($scope.orderBy==filter){if($scope.desc==1){$scope.desc=0}else{$scope.desc=1}}else{$scope.desc=1;$scope.orderBy=filter}$scope.getSponsors()};$scope.isNext=function(){return $scope.currentPage*$scope.pagination<$scope.size&&$scope.pagination>0};$scope.getPrev=function(){$scope.currentPage=$scope.currentPage-1;$scope.getSponsors()};$scope.getNext=function(){$scope.currentPage=$scope.currentPage+1;$scope.getSponsors()};$scope.getPages=function(pages){$scope.pagination=pages;$scope.currentPage=1;$scope.getSponsors()};$scope.getSize=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/sponsor/size/",method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.size=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.deleteSponsor=function(sponsorId){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/sponsor/"+sponsorId,method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.getSponsors();$("#modalDelete").modal("toggle")}).error(function(data,status,headers,config){console.log("error delete")})}else{console.log("error")}};$scope.getSponsors=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/sponsor/query?page="+$scope.currentPage+"&pageTam="+$scope.pagination+"&orderBy="+$scope.orderBy+"&desc="+$scope.desc,method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.data=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.ctr=function(){$scope.getSponsors()};$scope.ctr()};sponsorCtrl.$inject=["$scope","$cookieStore","$http","$rootScope"];angular.module("FICOnWeb").controller("sponsorCtrl",sponsorCtrl)})();(function(){var usersCtrl=function($scope,$rootScope,$cookieStore,$http){$scope.view={};$scope.data={};$scope.view.login="";$scope.view.id="";$scope.currentPage=1;$scope.pagination=50;$scope.size=0;$scope.orderBy="login";$scope.desc=0;$scope.changeFilter=function(filter){if($scope.orderBy==filter){if($scope.desc==1){$scope.desc=0}else{$scope.desc=1}}else{$scope.desc=1;$scope.orderBy=filter}$scope.getUsers()};$scope.changeDate=function(date){return moment(date,"DD-MM-YYYY/HH:mm:ss").format("DD-MM-YYYY")};$scope.isNext=function(){return $scope.currentPage*$scope.pagination<$scope.size&&$scope.pagination>0};$scope.getPrev=function(){$scope.currentPage=$scope.currentPage-1;$scope.getUsers()};$scope.getNext=function(){$scope.currentPage=$scope.currentPage+1;$scope.getUsers()};$scope.getPages=function(pages){$scope.pagination=pages;$scope.currentPage=1;$scope.getUsers()};$scope.getSize=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/users/all/size/",method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.size=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.deleteUser=function(userId){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/user/"+userId,method:"DELETE",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.getUsers();$("#modalDelete").modal("toggle")}).error(function(data,status,headers,config){console.log("error delete")})}else{console.log("error")}};$scope.getUsers=function(){if($cookieStore.get("FICOnCookie")){$http({url:$rootScope.config.apiUrl+"/api/users/all/query?page="+$scope.currentPage+"&pageTam="+$scope.pagination+"&orderBy="+$scope.orderBy+"&desc="+$scope.desc,method:"GET",headers:{sessionId:$cookieStore.get("FICOnCookie").sessionId}}).success(function(data,status,headers,config){$scope.data=data}).error(function(data,status,headers,config){console.log("error get")})}else{console.log("error")}};$scope.ctr=function(){$scope.getSize();$scope.getUsers()};$scope.ctr()};usersCtrl.$inject=["$scope","$rootScope","$cookieStore","$http"];angular.module("FICOnWeb").controller("usersCtrl",usersCtrl)})();
